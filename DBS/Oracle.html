<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Oracle | Bajins</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/icons/logo.png">
    <link rel="apple-touch-icon" href="/images/icons/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script type="text/javascript" src="/assets/js/load.js"></script>
    <meta name="description" content="Oracle两种临时表的创建及使用方法
https://docs.oracle.com/en/database/oracle/oracle-database/21/lnoci/preface.html">
    <meta name="twitter:title" content="Oracle">
    <meta name="twitter:description" content="Oracle两种临时表的创建及使用方法
https://docs.oracle.com/en/database/oracle/oracle-database/21/lnoci/preface.html">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://bajins.com/DBS/Oracle.html">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Oracle">
    <meta property="og:description" content="Oracle两种临时表的创建及使用方法
https://docs.oracle.com/en/database/oracle/oracle-database/21/lnoci/preface.html">
    <meta property="og:url" content="https://bajins.com/DBS/Oracle.html">
    <meta property="og:site_name" content="bajins">
    <meta itemprop="name" content="Oracle">
    <meta itemprop="description" content="Oracle两种临时表的创建及使用方法
https://docs.oracle.com/en/database/oracle/oracle-database/21/lnoci/preface.html">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/images/icons/logo.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="keywords" content="bajins,vue,vuepress,vuepress-theme,theme,主题,vuepress主题,blog
        ,vuepress-blog,java,python,shell,sql,golang,script,shell script,nginx,windows,去广告,androd,google drive
        ,one drive,idea,eclipse,git,小程序">
    <meta name="referrer" content="never">
    
    <link rel="preload" href="/assets/css/0.styles.6bab8a78.css" as="style"><link rel="preload" href="/assets/js/app.981da39f.js" as="script"><link rel="preload" href="/assets/js/2.b0e73877.js" as="script"><link rel="preload" href="/assets/js/1.809cd0bd.js" as="script"><link rel="preload" href="/assets/js/30.81b0d15d.js" as="script"><link rel="prefetch" href="/assets/js/100.de5d4715.js"><link rel="prefetch" href="/assets/js/101.7b0dbc05.js"><link rel="prefetch" href="/assets/js/102.1c861d2b.js"><link rel="prefetch" href="/assets/js/103.816b3c1c.js"><link rel="prefetch" href="/assets/js/104.db3d47d8.js"><link rel="prefetch" href="/assets/js/105.0ae2f0d8.js"><link rel="prefetch" href="/assets/js/106.744b5a35.js"><link rel="prefetch" href="/assets/js/107.e0831a80.js"><link rel="prefetch" href="/assets/js/108.1d94ce21.js"><link rel="prefetch" href="/assets/js/109.fe2d8f05.js"><link rel="prefetch" href="/assets/js/110.fbfa57c4.js"><link rel="prefetch" href="/assets/js/111.371dba07.js"><link rel="prefetch" href="/assets/js/112.5dcf42a8.js"><link rel="prefetch" href="/assets/js/113.f7e63c61.js"><link rel="prefetch" href="/assets/js/114.41a0cd5d.js"><link rel="prefetch" href="/assets/js/115.456699b9.js"><link rel="prefetch" href="/assets/js/116.9025b3c9.js"><link rel="prefetch" href="/assets/js/117.182394e5.js"><link rel="prefetch" href="/assets/js/118.c2cf5556.js"><link rel="prefetch" href="/assets/js/119.764fd113.js"><link rel="prefetch" href="/assets/js/12.3a08e0d3.js"><link rel="prefetch" href="/assets/js/120.efe1f413.js"><link rel="prefetch" href="/assets/js/121.81eaff75.js"><link rel="prefetch" href="/assets/js/122.624b8efc.js"><link rel="prefetch" href="/assets/js/123.37d3e2e4.js"><link rel="prefetch" href="/assets/js/124.014017b9.js"><link rel="prefetch" href="/assets/js/125.92153fba.js"><link rel="prefetch" href="/assets/js/126.bcaef36f.js"><link rel="prefetch" href="/assets/js/127.c2d29c54.js"><link rel="prefetch" href="/assets/js/128.ec6368f6.js"><link rel="prefetch" href="/assets/js/13.4de43466.js"><link rel="prefetch" href="/assets/js/14.1705f7d2.js"><link rel="prefetch" href="/assets/js/15.19bf60d0.js"><link rel="prefetch" href="/assets/js/16.abc595ed.js"><link rel="prefetch" href="/assets/js/17.86854a79.js"><link rel="prefetch" href="/assets/js/18.2925b87a.js"><link rel="prefetch" href="/assets/js/19.9b56cde3.js"><link rel="prefetch" href="/assets/js/20.b8fd1c56.js"><link rel="prefetch" href="/assets/js/21.24a50cf9.js"><link rel="prefetch" href="/assets/js/22.b1e0de5a.js"><link rel="prefetch" href="/assets/js/23.730d5d73.js"><link rel="prefetch" href="/assets/js/24.01adab3e.js"><link rel="prefetch" href="/assets/js/25.a941786f.js"><link rel="prefetch" href="/assets/js/26.bb74e7d5.js"><link rel="prefetch" href="/assets/js/27.448162d9.js"><link rel="prefetch" href="/assets/js/28.e5f430fd.js"><link rel="prefetch" href="/assets/js/29.37c62e45.js"><link rel="prefetch" href="/assets/js/3.35d1b09e.js"><link rel="prefetch" href="/assets/js/31.725b049c.js"><link rel="prefetch" href="/assets/js/32.26d0a8e0.js"><link rel="prefetch" href="/assets/js/33.6fe99bc3.js"><link rel="prefetch" href="/assets/js/34.e62f4d59.js"><link rel="prefetch" href="/assets/js/35.791a2aa3.js"><link rel="prefetch" href="/assets/js/36.dfa88b8c.js"><link rel="prefetch" href="/assets/js/37.e524fae9.js"><link rel="prefetch" href="/assets/js/38.ad5a1580.js"><link rel="prefetch" href="/assets/js/39.004d7253.js"><link rel="prefetch" href="/assets/js/4.c6d75e93.js"><link rel="prefetch" href="/assets/js/40.bd78eb91.js"><link rel="prefetch" href="/assets/js/41.75a62c3b.js"><link rel="prefetch" href="/assets/js/42.43240027.js"><link rel="prefetch" href="/assets/js/43.f9bc903f.js"><link rel="prefetch" href="/assets/js/44.3c42904e.js"><link rel="prefetch" href="/assets/js/45.b82c110e.js"><link rel="prefetch" href="/assets/js/46.8e786526.js"><link rel="prefetch" href="/assets/js/47.2d64c546.js"><link rel="prefetch" href="/assets/js/48.31c4a624.js"><link rel="prefetch" href="/assets/js/49.39084889.js"><link rel="prefetch" href="/assets/js/5.25d362a3.js"><link rel="prefetch" href="/assets/js/50.c7388c39.js"><link rel="prefetch" href="/assets/js/51.ebbd6f85.js"><link rel="prefetch" href="/assets/js/52.54e4726a.js"><link rel="prefetch" href="/assets/js/53.c8ae0535.js"><link rel="prefetch" href="/assets/js/54.6912efc7.js"><link rel="prefetch" href="/assets/js/55.9000b905.js"><link rel="prefetch" href="/assets/js/56.94c47a96.js"><link rel="prefetch" href="/assets/js/57.3236386a.js"><link rel="prefetch" href="/assets/js/58.19796471.js"><link rel="prefetch" href="/assets/js/59.c9b884d0.js"><link rel="prefetch" href="/assets/js/6.01bc19c8.js"><link rel="prefetch" href="/assets/js/60.37fb953c.js"><link rel="prefetch" href="/assets/js/61.5742921c.js"><link rel="prefetch" href="/assets/js/62.892e63b4.js"><link rel="prefetch" href="/assets/js/63.f10b438e.js"><link rel="prefetch" href="/assets/js/64.4b900f23.js"><link rel="prefetch" href="/assets/js/65.9ed6f07d.js"><link rel="prefetch" href="/assets/js/66.4ded54ef.js"><link rel="prefetch" href="/assets/js/67.6e11ef90.js"><link rel="prefetch" href="/assets/js/68.b1043f75.js"><link rel="prefetch" href="/assets/js/69.fd21d1db.js"><link rel="prefetch" href="/assets/js/7.804af732.js"><link rel="prefetch" href="/assets/js/70.3553c22a.js"><link rel="prefetch" href="/assets/js/71.bb154935.js"><link rel="prefetch" href="/assets/js/72.84960da4.js"><link rel="prefetch" href="/assets/js/73.9923d86a.js"><link rel="prefetch" href="/assets/js/74.6075574f.js"><link rel="prefetch" href="/assets/js/75.f8d45a73.js"><link rel="prefetch" href="/assets/js/76.774c6f9e.js"><link rel="prefetch" href="/assets/js/77.03a6f048.js"><link rel="prefetch" href="/assets/js/78.435bf2fa.js"><link rel="prefetch" href="/assets/js/79.200cb97a.js"><link rel="prefetch" href="/assets/js/8.1f44096b.js"><link rel="prefetch" href="/assets/js/80.6f08a010.js"><link rel="prefetch" href="/assets/js/81.42766821.js"><link rel="prefetch" href="/assets/js/82.a07e062d.js"><link rel="prefetch" href="/assets/js/83.b724e3b1.js"><link rel="prefetch" href="/assets/js/84.cec86c07.js"><link rel="prefetch" href="/assets/js/85.f243fdd8.js"><link rel="prefetch" href="/assets/js/86.37e7a11f.js"><link rel="prefetch" href="/assets/js/87.26a11ae8.js"><link rel="prefetch" href="/assets/js/88.e86b852c.js"><link rel="prefetch" href="/assets/js/89.076f084b.js"><link rel="prefetch" href="/assets/js/90.1a0429fe.js"><link rel="prefetch" href="/assets/js/91.e6b56224.js"><link rel="prefetch" href="/assets/js/92.e1ca3ab3.js"><link rel="prefetch" href="/assets/js/93.f9b72d16.js"><link rel="prefetch" href="/assets/js/94.38e35aa2.js"><link rel="prefetch" href="/assets/js/95.be195f16.js"><link rel="prefetch" href="/assets/js/96.0ad3fd29.js"><link rel="prefetch" href="/assets/js/97.3490b1c4.js"><link rel="prefetch" href="/assets/js/98.a21d9c28.js"><link rel="prefetch" href="/assets/js/99.f9138b3a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.91564f57.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.5a6e66f6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6bab8a78.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/icons/logo.png" alt="Bajins" class="logo"> <span class="site-name can-hide">Bajins</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/DBS/" class="nav-link router-link-active">
  DBS
</a></div><div class="nav-item"><a href="/Go/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/IDE/" class="nav-link">
  IDE
</a></div><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/Other/" class="nav-link">
  Other
</a></div><div class="nav-item"><a href="/PL/" class="nav-link">
  PL
</a></div><div class="nav-item"><a href="/Python/" class="nav-link">
  Python
</a></div><div class="nav-item"><a href="/Shell/" class="nav-link">
  Shell
</a></div><div class="nav-item"><a href="/System/" class="nav-link">
  System
</a></div><div class="nav-item"><a href="/Web/" class="nav-link">
  Web
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="快捷链接" class="dropdown-title"><span class="title">快捷链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="快捷链接" class="mobile-dropdown-title"><span class="title">快捷链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          外部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tool.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  获取XShell
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tr.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OCR图片识别
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tool.bajins.com/wnf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  朋友圈不折叠
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://g.bajins.eu.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub反代
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://g.woetu.eu.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub反代
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tool.bajins.com/wp/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WeasyPrint
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tool.bajins.com/sd/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Showdown
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          内部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/files.html" class="nav-link">
  文件
</a></li><li class="dropdown-subitem"><a href="/Other/Bookmarks.html" class="nav-link">
  书签锦集
</a></li><li class="dropdown-subitem"><a href="/System/Windows软件.html" class="nav-link">
  Windows软件
</a></li><li class="dropdown-subitem"><a href="/Other/Markdown.html#工具" class="nav-link">
  Markdown工具
</a></li></ul></li></ul></div></div> <a href="https://github.com/bajins/notes-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/DBS/" class="nav-link router-link-active">
  DBS
</a></div><div class="nav-item"><a href="/Go/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/IDE/" class="nav-link">
  IDE
</a></div><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/Other/" class="nav-link">
  Other
</a></div><div class="nav-item"><a href="/PL/" class="nav-link">
  PL
</a></div><div class="nav-item"><a href="/Python/" class="nav-link">
  Python
</a></div><div class="nav-item"><a href="/Shell/" class="nav-link">
  Shell
</a></div><div class="nav-item"><a href="/System/" class="nav-link">
  System
</a></div><div class="nav-item"><a href="/Web/" class="nav-link">
  Web
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="快捷链接" class="dropdown-title"><span class="title">快捷链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="快捷链接" class="mobile-dropdown-title"><span class="title">快捷链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          外部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tool.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  获取XShell
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tr.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OCR图片识别
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tool.bajins.com/wnf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  朋友圈不折叠
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://g.bajins.eu.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub反代
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://g.woetu.eu.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub反代
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tool.bajins.com/wp/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WeasyPrint
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tool.bajins.com/sd/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Showdown
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          内部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/files.html" class="nav-link">
  文件
</a></li><li class="dropdown-subitem"><a href="/Other/Bookmarks.html" class="nav-link">
  书签锦集
</a></li><li class="dropdown-subitem"><a href="/System/Windows软件.html" class="nav-link">
  Windows软件
</a></li><li class="dropdown-subitem"><a href="/Other/Markdown.html#工具" class="nav-link">
  Markdown工具
</a></li></ul></li></ul></div></div> <a href="https://github.com/bajins/notes-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>DBS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DBS/" aria-current="page" class="sidebar-link">DBS</a></li><li><a href="/DBS/MySQL.html" class="sidebar-link">MySQL</a></li><li><a href="/DBS/MySQL事件.html" class="sidebar-link">MySQL事件</a></li><li><a href="/DBS/MySQL备份恢复.html" class="sidebar-link">MySQL备份恢复</a></li><li><a href="/DBS/MySQL存储过程.html" class="sidebar-link">MySQL存储过程</a></li><li><a href="/DBS/MySQL安装配置.html" class="sidebar-link">MySQL安装配置</a></li><li><a href="/DBS/Oracle.html" aria-current="page" class="active sidebar-link">Oracle</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DBS/Oracle.html#flag" class="sidebar-link">Flag</a></li></ul></li><li><a href="/DBS/PostgreSQL.html" class="sidebar-link">PostgreSQL</a></li><li><a href="/DBS/mysql-udf安装.html" class="sidebar-link">mysql-udf安装</a></li><li><a href="/DBS/关系型SQL标准.html" class="sidebar-link">关系型SQL标准</a></li><li><a href="/DBS/关系型数据库.html" class="sidebar-link">关系型数据库</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="oracle"><a href="#oracle" class="header-anchor">#</a> Oracle</h1> <p></p><div class="table-of-contents"><ul><li><a href="#flag">Flag</a></li></ul></div><p></p> <h2 id="flag"><a href="#flag" class="header-anchor">#</a> Flag</h2> <ul><li><a href="https://blog.csdn.net/qq_34745941/article/details/106897099" target="_blank" rel="noopener noreferrer">Oracle with as + /<em>+ materialize</em>/ 优化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/beloved-bq/p/12561512.html" target="_blank" rel="noopener noreferrer">Oracle两种临时表的创建及使用方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.oracle.com/en/database/oracle/oracle-database/21/lnoci/preface.html" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/en/database/oracle/oracle-database/21/lnoci/preface.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><p>空字符串''同等NULL，字符串与数字类型会自动转换</p></blockquote> <blockquote><p>Oracle Call Interface（OCI）是Oracle提供的一组C语言API，用于开发Oracle数据库应用程序。
OCI提供了一种直接访问Oracle数据库的方式，使开发人员可以编写高效且可扩展的应用程序</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 创建会话级临时表来存储原数据，并删除表数据</span>
<span class="token keyword">CREATE</span> <span class="token keyword">GLOBAL</span> <span class="token keyword">TEMPORARY</span> <span class="token keyword">TABLE</span> TEST_BAK <span class="token keyword">AS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> TEST<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查看临时表数据</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> TEST_BAK<span class="token punctuation">;</span>

<span class="token comment">-- Oracle中类似于PostgreSQL的unnest</span>
<span class="token comment">-- https://docs.oracle.com/en/database/oracle/oracle-database/23/addci/extensibility-constants-types-and-mappings.html</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">table</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>odcinumberlist<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">table</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>odcivarchar2list<span class="token punctuation">(</span><span class="token string">'3a'</span><span class="token punctuation">,</span><span class="token string">'4b'</span><span class="token punctuation">,</span><span class="token string">'3d'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">-- 常量子查询</span>
字段 <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token number">10000</span> <span class="token keyword">FROM</span> dual <span class="token keyword">UNION</span> <span class="token keyword">ALL</span> <span class="token keyword">SELECT</span> <span class="token number">20000</span> <span class="token keyword">FROM</span> dual<span class="token punctuation">)</span>

<span class="token comment">-- 清空数据 delete是dml操作；truncate是ddl操作，ddl隐式提交不能回滚，会回收表空间</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> TEST<span class="token punctuation">;</span>
<span class="token comment">-- 将目标字段数据清空</span>
<span class="token comment">--UPDATE TEST SET MEASURED = NULL;</span>

<span class="token comment">-- 修改表字段</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> TEST <span class="token keyword">MODIFY</span> MEASURED NUMBER<span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 还原表结构</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> TEST <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> TEST_BAK<span class="token punctuation">;</span>

<span class="token comment">-- 删除临时表</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> TEST_BAK<span class="token punctuation">;</span>


<span class="token comment">-- 替代LISTAGG拼接超4000字符长度</span>
<span class="token keyword">SELECT</span>
REGEXP_REPLACE<span class="token punctuation">(</span>RTRIM<span class="token punctuation">(</span>XMLSERIALIZE<span class="token punctuation">(</span>CONTENT XMLAGG<span class="token punctuation">(</span>XMLELEMENT<span class="token punctuation">(</span>E<span class="token punctuation">,</span>colname<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span>EXTRACT<span class="token punctuation">(</span><span class="token string">'//text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> CLOB<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'(,)+'</span><span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span> a<span class="token punctuation">,</span>
REGEXP_REPLACE<span class="token punctuation">(</span>RTRIM<span class="token punctuation">(</span>XMLAGG<span class="token punctuation">(</span>XMLELEMENT<span class="token punctuation">(</span>E<span class="token punctuation">,</span>colname<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span>EXTRACT<span class="token punctuation">(</span><span class="token string">'//text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getclobval<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'(,)+'</span><span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span> b<span class="token punctuation">,</span>
REGEXP_REPLACE<span class="token punctuation">(</span>RTRIM<span class="token punctuation">(</span>REGEXP_REPLACE<span class="token punctuation">(</span>XMLSERIALIZE<span class="token punctuation">(</span>CONTENT XMLAGG<span class="token punctuation">(</span>XMLELEMENT<span class="token punctuation">(</span>e<span class="token punctuation">,</span> colname <span class="token operator">||</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> CLOB<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'&lt;E&gt;|&lt;/E&gt;'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'(,)+'</span><span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span> c
<span class="token keyword">FROM</span> table_name
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> grouping_column<span class="token punctuation">;</span>
</code></pre></div><p><strong>系统表</strong></p> <ul><li><code>USER_TABLES</code> 当前用户拥有的表：<code>TABLE_NAME</code>,<code>TABLESPACE_NAME</code>,<code>LAST_ANALYZED</code></li> <li><code>DBA_TABLES</code> 包括系统表：多了<code>OWER</code>列</li> <li><code>ALL_TABLES</code> 所有用户的表：多了<code>OWER</code>列</li> <li><code>ALL_OBJECTS</code> 当前用户有访问权限的所有对象：<code>OWER</code>,<code>OBJECT_NAME</code>,<code>SUBOBJECT_NAME</code>,<code>OBJECT_ID</code>,<code>CREATED</code>,<code>LAST_DDL_TIME</code>,<code>TIMESTAMP</code>,<code>STATUS</code></li> <li><code>USER_TAB_COLUMNS</code> 当前用户拥有的表字段</li> <li><code>ALL_TAB_COLUMNS</code></li> <li><code>DBA_TAB_COLUMNS</code></li> <li><code>USER_TAB_COMMENTS</code> 当前用户拥有的表注释 ：<code>TABLE_NAME</code>,<code>TABLE_TYPE</code>,<code>COMMENTS</code></li> <li><code>DBA_TAB_COMMENTS</code> ：多了<code>OWER</code>列</li> <li><code>ALL_TAB_COMMENTS</code> ：多了<code>OWER</code>列</li> <li><code>USER_COL_COMMENTS</code> 当前用户拥有的表字段注释 ： <code>TABLE_NAME</code>,<code>COLUMN_NAME</code>,<code>COMMENTS</code></li> <li><code>DBA_COL_COMMENTS</code> ：多了<code>OWER</code>列</li> <li><code>ALL_COL_COMMENTS</code> ：多了<code>OWER</code>列</li></ul> <blockquote><p><code>SELECT * FROM USER_TAB_COMMENTS WHERE COMMENTS LIKE '%摘要%'</code></p></blockquote> <p><strong>分组获取最新一条数据（查询各组最新的一条记录）</strong></p> <ul><li>over partition by 分析函数（开窗函数）</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> 分组字段名 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 排序字段名 <span class="token keyword">DESC</span><span class="token punctuation">)</span> rn<span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> test1 t
    <span class="token punctuation">)</span> <span class="token keyword">WHERE</span> rn <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> t<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> test1 t <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> 分组字段名 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 排序字段名 <span class="token keyword">DESC</span> <span class="token keyword">FETCH</span> <span class="token keyword">FIRST</span> <span class="token number">1</span> <span class="token keyword">ROWS</span> ONLY<span class="token punctuation">;</span>


<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> eb_vipcode<span class="token punctuation">,</span>eb_time<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>eb_time<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> eb_vipcode<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&quot;atime&quot;</span> <span class="token keyword">from</span> eb_daskexpdateinfo
    <span class="token punctuation">)</span> x <span class="token keyword">where</span> eb_time <span class="token operator">=</span> <span class="token string">&quot;atime&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> ID_<span class="token punctuation">,</span>COMPANY_NAME<span class="token punctuation">,</span>USAGE_RATE<span class="token punctuation">,</span>CREATE_TIME
    <span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>CREATE_TIME<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> COMPANY_NAME<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&quot;atime&quot;</span> <span class="token keyword">from</span> SPEC_RATE_ORIGIN
    <span class="token punctuation">)</span> x <span class="token keyword">where</span> CREATE_TIME <span class="token operator">=</span> <span class="token string">&quot;atime&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>group by</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> eb_vipcode<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>eb_time<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">&quot;atime&quot;</span> <span class="token keyword">FROM</span> eb_daskexpdateinfo <span class="token keyword">group</span> <span class="token keyword">by</span> eb_vipcode
</code></pre></div><ul><li>inner join</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> A<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> SPEC_RATE_ORIGIN A <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> COMPANY_NAME<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>CREATE_TIME<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">&quot;atime&quot;</span> <span class="token keyword">FROM</span> SPEC_RATE_ORIGIN <span class="token keyword">group</span> <span class="token keyword">by</span> COMPANY_NAME
    <span class="token punctuation">)</span> B <span class="token keyword">ON</span> A<span class="token punctuation">.</span>COMPANY_NAME <span class="token operator">=</span> B<span class="token punctuation">.</span>COMPANY_NAME <span class="token operator">AND</span> A<span class="token punctuation">.</span>CREATE_TIME <span class="token operator">=</span> B<span class="token punctuation">.</span><span class="token string">&quot;atime&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>一次执行多条SQL</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">ALL</span>
 <span class="token keyword">INTO</span> a表<span class="token punctuation">(</span>字段<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>各个值<span class="token number">1</span><span class="token punctuation">)</span>
 <span class="token keyword">INTO</span> a表<span class="token punctuation">(</span>字段<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>其它值<span class="token number">2</span><span class="token punctuation">)</span>
 <span class="token keyword">INTO</span> a表<span class="token punctuation">(</span>字段<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>其它值<span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
</code></pre></div><ul><li>使用<code>begin…end;</code></li></ul> <ul><li><a href="https://www.cnblogs.com/teamleader/archive/2007/05/31/765943.html" target="_blank" rel="noopener noreferrer">如何在Oracle中一次执行多条sql语句<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">begin</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> table_name <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>express<span class="token punctuation">,</span>express<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> table_name <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>express<span class="token punctuation">,</span>express<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> table_name <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>express<span class="token punctuation">,</span>express<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> table_name <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>express<span class="token punctuation">,</span>express<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>插入或更新 upsert</strong></p> <ul><li><a href="https://www.jianshu.com/p/602ba0b8395b" target="_blank" rel="noopener noreferrer">SQL语句 存在就更新不存在就插入<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/weixin_40374341/article/details/109239544" target="_blank" rel="noopener noreferrer">merge into 的用法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MERGE</span> <span class="token keyword">INTO</span> table_name alias1   
<span class="token keyword">USING</span> <span class="token punctuation">(</span><span class="token keyword">table</span><span class="token operator">|</span><span class="token keyword">view</span><span class="token operator">|</span>sub_query<span class="token punctuation">)</span> alias2  
<span class="token keyword">ON</span> <span class="token punctuation">(</span><span class="token keyword">join</span> condition<span class="token punctuation">)</span>   
<span class="token keyword">WHEN</span> <span class="token keyword">MATCHED</span> <span class="token keyword">THEN</span>   
    <span class="token keyword">UPDATE</span> table_name <span class="token keyword">SET</span> col1 <span class="token operator">=</span> col_val1
<span class="token keyword">WHEN</span> <span class="token operator">NOT</span> <span class="token keyword">MATCHED</span> <span class="token keyword">THEN</span>   
    <span class="token keyword">INSERT</span> <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>column_values<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>死锁</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询死锁会话</span>
<span class="token keyword">SELECT</span> l<span class="token punctuation">.</span>session_id sid<span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token keyword">serial</span><span class="token comment">#, l.locked_mode, l.oracle_username, l.os_user_name</span>
<span class="token punctuation">,</span> s<span class="token punctuation">.</span>machine<span class="token punctuation">,</span> s<span class="token punctuation">.</span>terminal<span class="token punctuation">,</span> o<span class="token punctuation">.</span>object_name<span class="token punctuation">,</span> s<span class="token punctuation">.</span>logon_time<span class="token punctuation">,</span> p<span class="token punctuation">.</span>SPID
 <span class="token keyword">FROM</span> v$locked_object l<span class="token punctuation">,</span> all_objects o<span class="token punctuation">,</span> v$<span class="token keyword">session</span> s<span class="token punctuation">,</span>v$process p
 <span class="token keyword">WHERE</span> l<span class="token punctuation">.</span>object_id <span class="token operator">=</span> o<span class="token punctuation">.</span>object_id <span class="token operator">AND</span> l<span class="token punctuation">.</span>session_id <span class="token operator">=</span> s<span class="token punctuation">.</span>sid <span class="token operator">AND</span> s<span class="token punctuation">.</span>paddr <span class="token operator">=</span> p<span class="token punctuation">.</span>addr
 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sid<span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token keyword">serial</span><span class="token comment">#;</span>

<span class="token comment">-- 结束</span>
<span class="token keyword">alter</span> system <span class="token keyword">kill</span> <span class="token keyword">session</span> <span class="token string">'sid,serial#'</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>orakill SID spid
</code></pre></div><p><strong>查看所有表结构</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> t1<span class="token punctuation">.</span>Table_Name <span class="token operator">||</span> chr<span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">||</span> t3<span class="token punctuation">.</span>comments       <span class="token keyword">AS</span> <span class="token string">&quot;表名称及说明&quot;</span><span class="token punctuation">,</span>
       <span class="token comment">--t3.comments                                 AS &quot;表说明&quot;,</span>
       t1<span class="token punctuation">.</span>COLUMN_ID                                  <span class="token keyword">AS</span> <span class="token string">&quot;序号&quot;</span><span class="token punctuation">,</span>
       t1<span class="token punctuation">.</span>Column_Name                                <span class="token keyword">AS</span> <span class="token string">&quot;字段名称&quot;</span><span class="token punctuation">,</span>
       t1<span class="token punctuation">.</span>DATA_TYPE <span class="token operator">||</span> <span class="token string">'('</span> <span class="token operator">||</span> t1<span class="token punctuation">.</span>DATA_LENGTH <span class="token operator">||</span> <span class="token string">')'</span>  <span class="token keyword">AS</span> <span class="token string">&quot;数据类型&quot;</span><span class="token punctuation">,</span>
       t1<span class="token punctuation">.</span>NullAble                                   <span class="token keyword">AS</span> <span class="token string">&quot;是否为空&quot;</span><span class="token punctuation">,</span>
       t2<span class="token punctuation">.</span>Comments                                   <span class="token keyword">AS</span> <span class="token string">&quot;字段说明&quot;</span><span class="token punctuation">,</span>
       t1<span class="token punctuation">.</span>Data_Default                               <span class="token keyword">AS</span> <span class="token string">&quot;默认值&quot;</span>
       <span class="token comment">--t4.created                                  AS &quot;建表时间&quot;</span>
<span class="token keyword">FROM</span> cols t1
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_col_comments t2 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>Table_name <span class="token operator">=</span> t2<span class="token punctuation">.</span>Table_name <span class="token operator">AND</span> t1<span class="token punctuation">.</span>Column_Name <span class="token operator">=</span> t2<span class="token punctuation">.</span>Column_Name
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_tab_comments t3 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>Table_name <span class="token operator">=</span> t3<span class="token punctuation">.</span>Table_name
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_objects t4 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>table_name <span class="token operator">=</span> t4<span class="token punctuation">.</span>OBJECT_NAME
<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> t4<span class="token punctuation">.</span>Object_Name
    <span class="token keyword">FROM</span> User_objects t4
    <span class="token keyword">WHERE</span> t4<span class="token punctuation">.</span>Object_Type <span class="token operator">=</span> <span class="token string">'TABLE'</span> <span class="token operator">AND</span> t4<span class="token punctuation">.</span><span class="token keyword">Temporary</span> <span class="token operator">=</span> <span class="token string">'Y'</span> <span class="token operator">AND</span> t4<span class="token punctuation">.</span>Object_Name <span class="token operator">=</span> t1<span class="token punctuation">.</span>Table_Name
<span class="token punctuation">)</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> t1<span class="token punctuation">.</span>Table_Name<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>Column_ID<span class="token punctuation">;</span>

<span class="token comment">-- 查询表字段信息</span>
<span class="token keyword">WITH</span> ct <span class="token keyword">AS</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> u3<span class="token punctuation">.</span>table_name<span class="token punctuation">,</span>u3<span class="token punctuation">.</span>column_name<span class="token punctuation">,</span>u4<span class="token punctuation">.</span>constraint_type <span class="token keyword">FROM</span> user_cons_columns u3
    <span class="token keyword">JOIN</span> user_constraints u4 <span class="token keyword">ON</span> u4<span class="token punctuation">.</span>constraint_name<span class="token operator">=</span>u3<span class="token punctuation">.</span>constraint_name <span class="token operator">AND</span> u4<span class="token punctuation">.</span>constraint_type<span class="token operator">=</span><span class="token string">'P'</span>
<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> u1<span class="token punctuation">.</span>column_id
<span class="token punctuation">,</span> u1<span class="token punctuation">.</span>column_name
<span class="token punctuation">,</span> u1<span class="token punctuation">.</span>data_type <span class="token keyword">AS</span> column_type
<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> u1<span class="token punctuation">.</span>data_type<span class="token operator">=</span><span class="token string">'NVARCHAR2'</span> <span class="token keyword">THEN</span> u1<span class="token punctuation">.</span>data_length<span class="token operator">/</span><span class="token number">2</span> <span class="token keyword">ELSE</span> u1<span class="token punctuation">.</span>data_length <span class="token keyword">END</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> data_length
<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> DECODE<span class="token punctuation">(</span>u1<span class="token punctuation">.</span>nullable<span class="token punctuation">,</span> <span class="token string">'Y'</span><span class="token punctuation">,</span> <span class="token string">'N'</span><span class="token punctuation">,</span> <span class="token string">'N'</span><span class="token punctuation">,</span> <span class="token string">'Y'</span><span class="token punctuation">,</span> <span class="token string">'N'</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">'Y'</span> <span class="token keyword">THEN</span> <span class="token number">0</span> <span class="token keyword">ELSE</span> <span class="token number">1</span> <span class="token keyword">END</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> nullable
<span class="token punctuation">,</span> u1<span class="token punctuation">.</span>data_precision <span class="token keyword">AS</span> data_precision
<span class="token punctuation">,</span> u1<span class="token punctuation">.</span>data_scale <span class="token keyword">AS</span> data_scale
<span class="token punctuation">,</span> u2<span class="token punctuation">.</span>comments
<span class="token punctuation">,</span> DECODE<span class="token punctuation">(</span>ct<span class="token punctuation">.</span>constraint_type<span class="token punctuation">,</span><span class="token string">'P'</span><span class="token punctuation">,</span><span class="token string">'PRI'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> column_key
<span class="token keyword">FROM</span> user_tab_columns u1
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_col_comments u2 <span class="token keyword">ON</span> u1<span class="token punctuation">.</span>table_name<span class="token operator">=</span>u2<span class="token punctuation">.</span>table_name <span class="token operator">AND</span> u1<span class="token punctuation">.</span>column_name<span class="token operator">=</span>u2<span class="token punctuation">.</span>column_name
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> ct <span class="token keyword">ON</span> ct<span class="token punctuation">.</span>table_name<span class="token operator">=</span>u1<span class="token punctuation">.</span>table_name <span class="token operator">AND</span> ct<span class="token punctuation">.</span>column_name<span class="token operator">=</span>u1<span class="token punctuation">.</span>column_name
<span class="token keyword">WHERE</span> u1<span class="token punctuation">.</span>table_name<span class="token operator">=</span> <span class="token string">'表名'</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> u1<span class="token punctuation">.</span>column_id
</code></pre></div><p><strong>日期时间</strong></p> <ul><li><a href="https://blog.csdn.net/HaHa_Sir/article/details/125572325" target="_blank" rel="noopener noreferrer">Oracle日期格式转换 to_date,to_char,to_timetamp 相互转换<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> SYSDATE<span class="token punctuation">,</span> SYSTIMESTAMP <span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span>TO_TIMESTAMP<span class="token punctuation">(</span><span class="token string">'2023-05-08 10:10:10'</span><span class="token punctuation">,</span> <span class="token string">'yyyy-mm-dd hh24:mi:ss'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'ww'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
<span class="token comment">-- 得到当天凌晨0点0分0秒的日期</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 获取今天最后的时间（即午夜之前的那一刻）</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.99999</span> <span class="token keyword">AS</span> last_time <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">86400</span> <span class="token keyword">AS</span> last_time <span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1'</span> <span class="token keyword">SECOND</span> <span class="token keyword">AS</span> last_time <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1'</span> <span class="token keyword">DAY</span> <span class="token operator">-</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1'</span> <span class="token keyword">SECOND</span> <span class="token keyword">AS</span> last_time <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'23'</span> <span class="token keyword">HOUR</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'59'</span> <span class="token keyword">MINUTE</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'59'</span> <span class="token keyword">SECOND</span> <span class="token keyword">AS</span> last_time <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 获取本周开始日期（星期一）</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'IW'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 获取本周结束日期（星期日）</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'IW'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">7</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 获取当月开始时间和结束时间</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'MM'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>LAST_DAY<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token number">0.99999</span> <span class="token keyword">FROM</span> DUAL
<span class="token comment">-- 获取今年开始时间和结束时间</span>
<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span>TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24:MI:SS'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> start_date<span class="token punctuation">,</span>
       TO_CHAR<span class="token punctuation">(</span>LAST_DAY<span class="token punctuation">(</span>TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.99999</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24:MI:SS'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> end_date
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TO_DATE<span class="token punctuation">(</span>EXTRACT<span class="token punctuation">(</span><span class="token keyword">YEAR</span> <span class="token keyword">FROM</span> SYSDATE<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'-01-01'</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24:MI:SS'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> start_date<span class="token punctuation">,</span>
       TO_DATE<span class="token punctuation">(</span>EXTRACT<span class="token punctuation">(</span><span class="token keyword">YEAR</span> <span class="token keyword">FROM</span> SYSDATE<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'-12-31 23:59:59'</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24:MI:SS'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> end_date
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> start_date<span class="token punctuation">,</span>
  TRUNC<span class="token punctuation">(</span>SYSDATE <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1'</span> <span class="token keyword">YEAR</span><span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1'</span> <span class="token keyword">SECOND</span> <span class="token keyword">AS</span> end_date
<span class="token keyword">FROM</span> dual
<span class="token comment">-- FM格式模型来实现不要前导零</span>
<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'FMMM'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> one_digit_month
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>


<span class="token comment">-- 获取倒推时间列表</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>sysdate <span class="token operator">-</span> NumToDSInterval<span class="token punctuation">(</span><span class="token keyword">level</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'hour'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> ds <span class="token comment">-- 'day','hour','minute','second'</span>
<span class="token punctuation">,</span> TRUNC<span class="token punctuation">(</span>sysdate <span class="token operator">-</span> NumToYMInterval<span class="token punctuation">(</span><span class="token keyword">level</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'month'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> ym <span class="token comment">-- 'year','month'</span>
<span class="token keyword">FROM</span> dual <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> <span class="token keyword">level</span> <span class="token operator">&lt;=</span> <span class="token number">12</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span>Add_Months<span class="token punctuation">(</span>TRUNC<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">'YYYY'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">Level</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'FMMonth'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> month_name <span class="token keyword">FROM</span> Dual <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> <span class="token keyword">Level</span> <span class="token operator">&lt;=</span> <span class="token number">12</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>SYSDATE <span class="token operator">-</span> <span class="token keyword">LEVEL</span><span class="token operator">/</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'HH24'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> HOURMIN <span class="token keyword">FROM</span> DUAL <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> <span class="token keyword">LEVEL</span> <span class="token operator">&lt;=</span> <span class="token number">12</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 将数据按半小时进行分组</span>
<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token string">'30'</span> <span class="token keyword">THEN</span> <span class="token string">':00'</span> <span class="token keyword">ELSE</span> <span class="token string">':30'</span> <span class="token keyword">END</span> <span class="token keyword">AS</span> half_hour<span class="token punctuation">,</span>
       <span class="token function">SUM</span><span class="token punctuation">(</span>col_8<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_money
<span class="token keyword">FROM</span> table_name
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token string">'30'</span> <span class="token keyword">THEN</span> <span class="token string">':00'</span> <span class="token keyword">ELSE</span> <span class="token string">':30'</span> <span class="token keyword">END</span>

<span class="token keyword">SELECT</span> TRUNC<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'HH24'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token string">'30'</span> <span class="token keyword">THEN</span> <span class="token keyword">INTERVAL</span> <span class="token string">'0'</span> <span class="token keyword">MINUTE</span> <span class="token keyword">ELSE</span> <span class="token keyword">INTERVAL</span> <span class="token string">'30'</span> <span class="token keyword">MINUTE</span> <span class="token keyword">END</span> <span class="token keyword">AS</span> half_hour<span class="token punctuation">,</span>
       <span class="token function">SUM</span><span class="token punctuation">(</span>col_8<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_money
<span class="token keyword">FROM</span> table_name
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> TRUNC<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'HH24'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> TO_CHAR<span class="token punctuation">(</span>record_date<span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token string">'30'</span> <span class="token keyword">THEN</span> <span class="token keyword">INTERVAL</span> <span class="token string">'0'</span> <span class="token keyword">MINUTE</span> <span class="token keyword">ELSE</span> <span class="token keyword">INTERVAL</span> <span class="token string">'30'</span> <span class="token keyword">MINUTE</span> <span class="token keyword">END</span>
</code></pre></div><p><strong>随机取数</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> test a
<span class="token comment">--WHERE rownum = FLOOR(DBMS_RANDOM.VALUE(1, 10))</span>
<span class="token keyword">WHERE</span> <span class="token function">MOD</span><span class="token punctuation">(</span>rownum<span class="token punctuation">,</span> floor<span class="token punctuation">(</span>DBMS_RANDOM<span class="token punctuation">.</span><span class="token keyword">VALUE</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">FETCH</span> <span class="token keyword">FIRST</span> <span class="token keyword">ROW</span> ONLY

<span class="token comment">-- 重建排序</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> a<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> rownum <span class="token keyword">as</span> rn
    <span class="token keyword">FROM</span> test a
<span class="token punctuation">)</span>
<span class="token keyword">WHERE</span> <span class="token function">MOD</span><span class="token punctuation">(</span>rn<span class="token punctuation">,</span> floor<span class="token punctuation">(</span>DBMS_RANDOM<span class="token punctuation">.</span><span class="token keyword">VALUE</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> dbms_random<span class="token punctuation">.</span><span class="token keyword">value</span>
<span class="token keyword">FETCH</span> <span class="token keyword">FIRST</span> <span class="token keyword">ROW</span> ONLY<span class="token punctuation">;</span>

<span class="token comment">-- Oracle类PostgreSQL的generate_series函数</span>
<span class="token keyword">SELECT</span> ROWNUM <span class="token keyword">AS</span> num <span class="token keyword">FROM</span> dual <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> ROWNUM <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">LEVEL</span> <span class="token keyword">AS</span> num <span class="token keyword">FROM</span> DUAL <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> <span class="token keyword">LEVEL</span> <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">-- 使用序列</span>
<span class="token keyword">CREATE</span> SEQUENCE seq_num <span class="token keyword">START</span> <span class="token keyword">WITH</span> <span class="token number">1</span> INCREMENT <span class="token keyword">BY</span> <span class="token number">1</span> NOMAXVALUE<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">NEXT</span> <span class="token keyword">VALUE</span> <span class="token keyword">FOR</span> seq_num <span class="token keyword">AS</span> num <span class="token keyword">FROM</span> DUAL <span class="token keyword">WHERE</span> <span class="token keyword">NEXT</span> <span class="token keyword">VALUE</span> <span class="token keyword">FOR</span> seq_num <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/bajins/notes-vuepress/edit/master//DBS/Oracle.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025-10-30 08:52:04</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/DBS/MySQL安装配置.html" class="prev">
        MySQL安装配置
      </a></span> <span class="next"><a href="/DBS/PostgreSQL.html">
        PostgreSQL
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.981da39f.js" defer></script><script src="/assets/js/2.b0e73877.js" defer></script><script src="/assets/js/1.809cd0bd.js" defer></script><script src="/assets/js/30.81b0d15d.js" defer></script>
  </body>
</html>
