(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{457:function(s,a,t){"use strict";t.r(a);var e=t(0),n=Object(e.a)({},function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"linux配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux配置"}},[s._v("#")]),s._v(" Linux配置")]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#源码安装卸载"}},[s._v("源码安装卸载")]),a("ul",[a("li",[a("a",{attrs:{href:"#checkinstall"}},[s._v("checkinstall")])])])]),a("li",[a("a",{attrs:{href:"#初次配置"}},[s._v("初次配置")]),a("ul",[a("li",[a("a",{attrs:{href:"#修改时区为亚洲上海"}},[s._v("修改时区为亚洲上海")])]),a("li",[a("a",{attrs:{href:"#安装简体中文语言包"}},[s._v("安装简体中文语言包")])]),a("li",[a("a",{attrs:{href:"#设置中文utf8编码"}},[s._v("设置中文utf8编码")])]),a("li",[a("a",{attrs:{href:"#安装字体"}},[s._v("安装字体")])]),a("li",[a("a",{attrs:{href:"#设置vim"}},[s._v("设置VIM")])]),a("li",[a("a",{attrs:{href:"#ssh会话执行文件"}},[s._v("SSH会话执行文件")])])])]),a("li",[a("a",{attrs:{href:"#开机启动"}},[s._v("开机启动")])]),a("li",[a("a",{attrs:{href:"#修改为root登录"}},[s._v("修改为root登录")])]),a("li",[a("a",{attrs:{href:"#挂载存储卷"}},[s._v("挂载存储卷")]),a("ul",[a("li",[a("a",{attrs:{href:"#基本概念"}},[s._v("基本概念")])]),a("li",[a("a",{attrs:{href:"#物理卷命令"}},[s._v("物理卷命令")])]),a("li",[a("a",{attrs:{href:"#卷组命令"}},[s._v("卷组命令")])]),a("li",[a("a",{attrs:{href:"#卷组扩充与缩小"}},[s._v("卷组扩充与缩小")])]),a("li",[a("a",{attrs:{href:"#卷组合并与拆分"}},[s._v("卷组合并与拆分")])]),a("li",[a("a",{attrs:{href:"#卷组输入与输出"}},[s._v("卷组输入与输出")])]),a("li",[a("a",{attrs:{href:"#逻辑卷命令"}},[s._v("逻辑卷命令")])]),a("li",[a("a",{attrs:{href:"#逻辑卷创建与删除"}},[s._v("逻辑卷创建与删除")])]),a("li",[a("a",{attrs:{href:"#逻辑卷扩充与缩小"}},[s._v("逻辑卷扩充与缩小")])]),a("li",[a("a",{attrs:{href:"#逻辑卷管理命令"}},[s._v("逻辑卷管理命令")])]),a("li",[a("a",{attrs:{href:"#挂载"}},[s._v("挂载")])])])]),a("li",[a("a",{attrs:{href:"#扩容"}},[s._v("扩容")])])])]),a("p"),s._v(" "),a("h1",{attrs:{id:"flag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flag"}},[s._v("#")]),s._v(" Flag")]),s._v(" "),a("ul",[a("li",[s._v("广告拦截 "),a("a",{attrs:{href:"https://github.com/pi-hole/pi-hole",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/pi-hole/pi-hole"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://linuxiac.com/how-to-install-fonts-on-linux",target:"_blank",rel:"noopener noreferrer"}},[s._v("在 Linux 上安装字体：综合指南"),a("OutboundLink")],1)])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看/bin/sh指向的解释器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /bin/sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-al")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新配置dash，并选择“no”，即不使用dash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" dpkg-reconfigure dash\n")])])]),a("h2",{attrs:{id:"源码安装卸载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码安装卸载"}},[s._v("#")]),s._v(" 源码安装卸载")]),s._v(" "),a("blockquote",[a("p",[s._v("编译时的路径如果指定了"),a("code",[s._v("--prefix /usr/local/xxx")]),s._v(" 直接"),a("code",[s._v("rm -rf /usr/local/xxx")]),s._v("即可。")]),s._v(" "),a("p",[s._v("没指定路径，那就到源码路径执行make uninstall，如果最初的编译文件夹被删除了，还可以重新下载、编译，然后删除")])]),s._v(" "),a("p",[a("strong",[s._v("如果源码被删除就查找并删除")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-name")]),s._v(" 软件名称\n")])])]),a("h3",{attrs:{id:"checkinstall"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#checkinstall"}},[s._v("#")]),s._v(" checkinstall")]),s._v(" "),a("blockquote",[a("p",[s._v("通过"),a("code",[s._v("checkinstall")]),s._v("管理编译安装过程")])]),s._v(" "),a("p",[a("strong",[s._v("使用"),a("code",[s._v("checkinstall")]),s._v("编译安装")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("./configure\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\ncheckinstall\n")])])]),a("ul",[a("li",[s._v("CheckInstall会完成以下任务")])]),s._v(" "),a("ol",[a("li",[s._v("调用"),a("code",[s._v("make install")]),s._v("，然后用"),a("code",[s._v("installwatch")]),s._v("监视、记录整个安装过程中添加的文件")]),s._v(" "),a("li",[s._v("等到安装完成，把记录的文件打包，根据不同的系统创建安装包："),a("code",[s._v(".rpm")]),s._v("或"),a("code",[s._v(".deb")]),s._v(" "),a("ul",[a("li",[s._v("注：安装包会保存在源代码目录，以便复制到其它机器安装，省去重复编译的麻烦。")])])]),s._v(" "),a("li",[s._v("移除"),a("code",[s._v("make install")]),s._v("安装的文件")]),s._v(" "),a("li",[s._v("调用系统安装工具来安装第2步创建的安装包："),a("code",[s._v("rpm -i")]),s._v("或"),a("code",[s._v("dpkg -i")])])]),s._v(" "),a("p",[a("strong",[s._v("卸载"),a("code",[s._v("checkinstall")]),s._v("安装的软件")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("CentOS: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" package_name\nUbuntu: dpkg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" package_name\n")])])]),a("h2",{attrs:{id:"初次配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初次配置"}},[s._v("#")]),s._v(" 初次配置")]),s._v(" "),a("h3",{attrs:{id:"修改时区为亚洲上海"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改时区为亚洲上海"}},[s._v("#")]),s._v(" 修改时区为亚洲上海")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sf")]),s._v(" /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\n")])])]),a("h3",{attrs:{id:"安装简体中文语言包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装简体中文语言包"}},[s._v("#")]),s._v(" 安装简体中文语言包")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看系统当前使用语言包")]),s._v("\nlocale\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看系统拥有语言包")]),s._v("\nlocale "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("如果没有zh_CN.utf8就需要安装简体中文语言包")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" kde-l10n-Chinese\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#glibc-common软件包包括用于GNU libc库的常见二进制文件，以及国家语言（locale）支持。")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" reinstall glibc-common\nyum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" groupinstall chinese-support\n")])])]),a("h3",{attrs:{id:"设置中文utf8编码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置中文utf8编码"}},[s._v("#")]),s._v(" 设置中文utf8编码")]),s._v(" "),a("p",[a("strong",[s._v("临时")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANG")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("zh_CN.UTF-8\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANGUAGE")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("zh_CN.UTF-8\n")])])]),a("p",[a("strong",[s._v("长久")])]),s._v(" "),a("ul",[a("li",[s._v("CenOS7修改"),a("code",[s._v("vi /etc/locale.conf")])]),s._v(" "),a("li",[s._v("CentOS6修改"),a("code",[s._v("vi /etc/sysconfig/i18n")])]),s._v(" "),a("li",[s._v("Ubuntu修改"),a("code",[s._v("vi /etc/default/locale")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/qu_learner/article/details/104030765",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ubuntu修改编码格式为中文"),a("OutboundLink")],1)])])])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANG")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.utf8"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANGUAGE")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8:zh_CN.utf8:zh_CN"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SUPPORTED")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.utf8:zh_CN:zh:en_US.utf8:en_US:en"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SYSFONT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lat0-sun16"')]),s._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("localectl set-locale "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANG")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("zh_CN.utf8\n")])])]),a("h3",{attrs:{id:"安装字体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装字体"}},[s._v("#")]),s._v(" 安装字体")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装字体配置和字体索引指令")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" fontconfig mkfontscale\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" fontconfig xfonts-utils\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看字体")]),s._v("\nfc-list\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看系统中已经安装的中文字体")]),s._v("\nfc-list :lang"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("zh\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入C:\\Windows\\Fonts把MSYH.TTF（微软雅黑字体文件）和simhei.tty（黑体常规）文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上传到linux服务器/usr/share/fonts/my_fonts下")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 建立字体索引信息")]),s._v("\nmkfontscale\nmkfontdir\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新字体缓存")]),s._v("\nfc-cache\n")])])]),a("h3",{attrs:{id:"设置vim"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置vim"}},[s._v("#")]),s._v(" 设置VIM")]),s._v(" "),a("p",[a("strong",[s._v("解决中文乱码问题")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/vim/vimrc\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在开头或者末尾添加")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("fileencodings")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf-8,gbk,utf-16le,cp1252,iso-8859-15,ucs-bom\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("termencoding")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf-8\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("encoding")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf-8\n")])])]),a("p",[a("strong",[s._v("显示行号")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/vimrc\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/virc\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在开头或者末尾添加")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" number\n")])])]),a("h3",{attrs:{id:"ssh会话执行文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh会话执行文件"}},[s._v("#")]),s._v(" SSH会话执行文件")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/etc/motd")]),s._v(" 可以在里面加入自己喜欢的任何欢迎信息，这段信息将会在登录成功后显示")]),s._v(" "),a("li",[a("code",[s._v("/etc/profile")]),s._v(" 中设定的变量(全局)的可以作用于任何用户")]),s._v(" "),a("li",[a("code",[s._v("/.bashrc")]),s._v(" 设定的变量(局部)只能继承"),a("code",[s._v("/etc/profile")]),s._v("中的变量,他们是”父子”关系")]),s._v(" "),a("li",[a("code",[s._v("/~/.bash_profile")]),s._v(" 当前用户登录时执行")]),s._v(" "),a("li",[a("code",[s._v("/~/.bash_logout")]),s._v(" 当前用户每次退出系统(退出shell)时执行")]),s._v(" "),a("li",[a("code",[s._v("/~/.bashrc")]),s._v(" 当前用户登录时以及每次打开新的shell时,该文件被读取")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("export key=value")]),s._v(" 设置变量")]),s._v(" "),a("li",[a("code",[s._v("source 文件路径")]),s._v(" 刷新配置文件，立即执行（变量、程序、脚本）")]),s._v(" "),a("li",[a("code",[s._v("PATH=$PATH:")]),s._v(" 全局变量，不同值之间用"),a("code",[s._v(":")]),s._v("分割，存储在"),a("code",[s._v("~/.bash_profile")]),s._v("里")])]),s._v(" "),a("blockquote",[a("p",[s._v("为每一个运行bash shell的用户执行此文件.当bash shell被打开时, 该文件被读取（即每次新开一个终端，都会执行bashrc）。")]),s._v(" "),a("p",[s._v("只要在同一个shell界面，不管多少用户登录都只执行一次")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/profile\n")])])]),a("blockquote",[a("p",[s._v("此文件为系统的每个用户设置环境信息,当用户第一次登录时,该文件被执行. 并从"),a("code",[s._v("/etc/profile.d")]),s._v("目录的配置文件中搜集shell的设置。")]),s._v(" "),a("p",[s._v("如果进入shell用普通用户登录后，再用su进入root用户那么将会被执行两次")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/bashrc\n")])])]),a("p",[a("strong",[s._v("欢迎信息")])]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/taills/sysinfo",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/taills/sysinfo"),a("OutboundLink")],1)])]),s._v(" "),a("blockquote",[a("p",[s._v("输入"),a("kbd",[s._v("shift")]),s._v(" + "),a("kbd",[s._v("g")]),s._v("（就是大写的"),a("code",[s._v("G")]),s._v("）跳转到末尾添加以下内容")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'=========================================================='")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看系统发行版信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/PRETTY_NAME=//gp'")]),s._v(" /etc/os-release\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询内核版本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/version\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'=========================================================='")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询目前所有文件系统的可用空间及使用情形")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Th")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'=========================================================='")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询内存使用情况")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'=========================================================='")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到home文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看系统发行版信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/*release\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/os-release\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /usr/lib/os-release\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出NAME和VERSION")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/os-release "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PRETTY_NAME")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/PRETTY_NAME=//gp'")]),s._v(" /etc/os-release\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/os-release "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" ^PRETTY_NAME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-F")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $2}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出NAME部分")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/PRETTY_NAME/ s/^.*=\\|\"\\| .*//gp'")]),s._v(" /etc/os-release\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/os-release "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PRETTY_NAME"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/PRETTY_NAME=//g'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/[\"]//g'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $1}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/issue\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/issue.net\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询内核版本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/version\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/sys/kernel/ostype /proc/sys/kernel/osrelease\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dmesg")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Linux version'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sr")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看cpu相关信息（型号、主频、内核）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/cpuinfo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看CPU信息（型号）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/cpuinfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f2")]),s._v(" -d: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uniq")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看物理CPU个数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/cpuinfo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"physical id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uniq")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'physical id'")]),s._v(" /proc/cpuinfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看每个物理CPU中core的个数(即核数)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/cpuinfo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cpu cores"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uniq")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'core id'")]),s._v(" /proc/cpuinfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看逻辑CPU的个数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/cpuinfo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"processor"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'processor'")]),s._v(" /proc/cpuinfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("\n")])])]),a("h2",{attrs:{id:"开机启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开机启动"}},[s._v("#")]),s._v(" 开机启动")]),s._v(" "),a("p",[a("strong",[s._v("添加命令到"),a("code",[s._v("/etc/rc.local")]),s._v("文件末尾")])]),s._v(" "),a("blockquote",[a("p",[s._v("编辑"),a("code",[s._v("/etc/rc.local")]),s._v("或者"),a("code",[s._v("/etc/rc.d/rc.local")]),s._v("（前者是后者的软连接）文件，\n按"),a("kbd",[s._v("Shift")]),s._v(" + "),a("kbd",[s._v("g")]),s._v("（就是大写的G）跳转到末尾添加运行命令")]),s._v(" "),a("blockquote",[a("p",[s._v("执行的程序需要写绝对路径，添加到系统环境变量的除外")])])]),s._v(" "),a("blockquote",[a("p",[s._v("为防止启动执行失败，最好执行一次"),a("code",[s._v("chmod +x /etc/rc.d/rc.local")]),s._v("进行授权")])]),s._v(" "),a("p",[a("strong",[s._v("crontab")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v("\n@reboot 运行程序命令\n")])])]),a("p",[a("strong",[s._v("脚本文件放在"),a("code",[s._v("/etc/profile.d/")]),s._v("目录下")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("chkconfig")])])]),s._v(" "),a("ol",[a("li",[s._v("创建软连接或者复制脚本到"),a("code",[s._v("/etc/init.d/")]),s._v("或者"),a("code",[s._v("/etc/rc.d/init.d/")]),s._v("（前者是后者的软连接）下")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意脚本文件开头一定要添加以下几行代码，否侧会提示"),a("code",[s._v("chkconfig")]),s._v("不支持")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 64 36 分别代表运行级别，启动优先权，关闭优先权")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chkconfig: - 64 36")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# description: Supervisor Server")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# processname: supervisord")]),s._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("添加启动项")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--add")]),s._v(" 脚本名\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" 脚本名 on\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("检查是否设置成功")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" 脚本名\n")])])]),a("h2",{attrs:{id:"修改为root登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改为root登录"}},[s._v("#")]),s._v(" 修改为root登录")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重置root密码，其他账户都一样按此方法修改root为指定账户即可")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" root\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" root:密码 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" chpasswd root\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到root账号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 强制删除用户（会同时删除相关目录）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("userdel")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" name\n")])])]),a("p",[a("strong",[s._v("修改sshd_config中的参数")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑sshd_config文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/ssh/sshd_config\n")])])]),a("ul",[a("li",[a("code",[s._v("PermitRootLogin")]),s._v(" 修改为"),a("code",[s._v("yes")]),s._v(" 允许远程root用户登入")]),s._v(" "),a("li",[a("code",[s._v("PasswordAuthentication")]),s._v(" 修改为"),a("code",[s._v("yes")]),s._v(" 允许使用用户名密码方式登入")])]),s._v(" "),a("p",[a("strong",[s._v("或者执行命令直接修改")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -r 支持扩展表达式，-i 直接修改文件内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^#\\?Port.*/Port 22/g'")]),s._v(" /etc/ssh/sshd_config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^#\\?PermitRootLogin.*/PermitRootLogin yes/g'")]),s._v(" /etc/ssh/sshd_config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ri")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^#?(PasswordAuthentication)\\s+(yes|no)/\\1 yes/'")]),s._v(" /etc/ssh/sshd_config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改authorized_keys文件（即ssh证书），把ssh-rsa之前的内容都删除掉（酌情执行）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ri")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^/#/;s/sleep 10\"\\s+/&\\n/'")]),s._v(" /root/.ssh/authorized_keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[a("strong",[s._v("重启ssh")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" sshd restart\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" --full-restart\n")])])]),a("h2",{attrs:{id:"挂载存储卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载存储卷"}},[s._v("#")]),s._v(" 挂载存储卷")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/chenjian158978/chenjian.github.io/blob/master/_posts/2017-05-10-Play%20Disk%20On%20Linux.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("玩转Linux之硬盘分区格式化挂载与合并"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[s._v("#")]),s._v(" 基本概念")]),s._v(" "),a("p",[s._v("1、 物理卷—–PV（Physical Volume）\n物理卷在逻辑卷管理中处于最底层，它可以是实际物理硬盘上的分区，也可以是整个物理硬盘。")]),s._v(" "),a("p",[s._v("2、 卷组——–VG（Volumne Group）\n卷组建立在物理卷之上，一个卷组中至少要包括一个物理卷，在卷组建立之后可动态添加物理卷到卷组中。一个逻辑卷管理系统工程中可以只有一个卷组，也可以拥有多个卷组。")]),s._v(" "),a("p",[s._v("3、 逻辑卷—–LV（Logical Volume）\n逻辑卷建立在卷组之上，卷组中的未分配空间可以用于建立新的逻辑卷，逻辑卷建立后可以动态地扩展和缩小空间。系统中的多个逻辑卷要以属于同一个卷组，也可以属于不同的多个卷组。")]),s._v(" "),a("p",[s._v("4、 物理区域–PE（Physical Extent）\n物理区域是物理卷中可用于分配的最小存储单元，物理区域的大小可根据实际情况在建立物理卷时指定。物理区域大小一旦确定将不能更改，同一卷组中的所有物理卷的物理区域大小需要一致。")]),s._v(" "),a("p",[s._v("5、 逻辑区域―LE（Logical Extent）\n逻辑区域是逻辑卷中可用于分配的最小存储单元，逻辑区域的大小取决于逻辑卷所在卷组中的物理区域的大小。")]),s._v(" "),a("p",[s._v("6、 卷组描述区域—–（Volume Group Descriptor Area）\n卷组描述区域存在于每个物理卷中，用于描述物理卷本身、物理卷所属卷组、卷组中的逻辑卷及逻辑卷中物理区域的分配等所有信息，卷组描述区域是在使用pvcreate建立物理卷时建立的。")]),s._v(" "),a("h3",{attrs:{id:"物理卷命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#物理卷命令"}},[s._v("#")]),s._v(" 物理卷命令")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pvscan "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在系统的所有磁盘中搜索已存在的物理卷")]),s._v("\npvdisplay 物理卷全路径名称 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用于显示指定物理卷的属性。")]),s._v("\npvdata 物理卷全路径名称 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用于显示物理卷的卷组描述区域信息，用于调试目的。")]),s._v("\npvchange Cx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--allocation "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" 物理卷全路径名 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用于改变物理卷的分配许可设置物理卷的创建与删除命令")]),s._v("\npvcreate 设备全路径名 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ff")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用于在磁盘或磁盘分区上创建物理卷初始化信息，以便对该物理卷进行逻辑卷管理。")]),s._v("\npvmove 源物理卷全路径我"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("目的物理卷全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用于把某物理卷中的数据转移到同卷组中其他的特刊卷中。")]),s._v("\n")])])]),a("h3",{attrs:{id:"卷组命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卷组命令"}},[s._v("#")]),s._v(" 卷组命令")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("vgscan "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#检测系统中所有磁盘")]),s._v("\nvgck "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("卷组名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用于检查卷组中卷组描述区域信息的一致性。")]),s._v("\nvgdisplay "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("卷组名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示卷组的属性信息")]),s._v("\nvgrename 原卷组名 新卷组名\nvgchange "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("卷组名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#改变卷组的相应属性。是否可分配")]),s._v("\nvgchange "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" 最大逻辑卷数 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#卷组可容纳最大逻辑卷数")]),s._v("\nvgchange "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("卷组名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#卷是否有效")]),s._v("\nvgmknodes "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("卷组名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("卷组路径"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用于建立（重新建立）已有卷组目录和其中的设备文件卷组配置的备份与恢复命令")]),s._v("\nvgcfgbackup "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("卷组名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#把卷组中的VGDA信息备份到“/etc/lvmconf”目录中的文件")]),s._v("\nvgcfgrestore "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" 卷组名 物理卷全路命名 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从备份文件中必得指定物理卷的信息卷组的建立与删除命令")]),s._v("\nvgcreate 卷组名 物理卷全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("物理卷全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nvgmove 卷组名\n")])])]),a("h3",{attrs:{id:"卷组扩充与缩小"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卷组扩充与缩小"}},[s._v("#")]),s._v(" 卷组扩充与缩小")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("vgextend 卷组名 物理卷全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("物理卷全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nvgreduce 卷组名 物理卷全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("物理卷全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("h3",{attrs:{id:"卷组合并与拆分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卷组合并与拆分"}},[s._v("#")]),s._v(" 卷组合并与拆分")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://juejin.cn/post/7343156956666445859",target:"_blank",rel:"noopener noreferrer"}},[s._v("linux磁盘挂载，硬盘空间合并"),a("OutboundLink")],1)])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("vgsplit 现有卷组 新卷组 物理卷全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("物理卷全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("h3",{attrs:{id:"卷组输入与输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卷组输入与输出"}},[s._v("#")]),s._v(" 卷组输入与输出")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("vgexport 卷组名\nvgimport 卷组名 卷组中的物理卷"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("卷组中的物理卷"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("h3",{attrs:{id:"逻辑卷命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#逻辑卷命令"}},[s._v("#")]),s._v(" 逻辑卷命令")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lvscan\nlvdisplay 逻辑卷全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("逻辑卷全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nlvrename 旧逻辑卷全路径名 新逻辑卷全路径名\nlvrename 卷组名 旧逻辑卷名 新逻辑卷名\nlvchange\ne2fsadm "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" +"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("- 逻辑卷增减量 逻辑卷全路径名\n")])])]),a("h3",{attrs:{id:"逻辑卷创建与删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#逻辑卷创建与删除"}},[s._v("#")]),s._v(" 逻辑卷创建与删除")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lvcreate\nlvremove\n")])])]),a("h3",{attrs:{id:"逻辑卷扩充与缩小"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#逻辑卷扩充与缩小"}},[s._v("#")]),s._v(" 逻辑卷扩充与缩小")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lvextend -L"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--size +逻辑卷大小增量 逻辑卷全路径名\nlvreduce q -L"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--size +逻辑卷减小量 逻辑卷全路径名\n")])])]),a("h3",{attrs:{id:"逻辑卷管理命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#逻辑卷管理命令"}},[s._v("#")]),s._v(" 逻辑卷管理命令")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lvmdiskscan "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#检测所有的SCSI、IDE等存储设备")]),s._v("\nlvmchange -R"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--reset "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#复位逻辑卷管理器")]),s._v("\nlvmsadc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("日志文件全路径名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#收信逻辑卷管理器读写统计信息，保存到日志文件中。")]),s._v("\nlvmsar 日志文件全路径名 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从lvmsadc命令生成的日志文件中读取并报告逻辑卷管理器的读写统计信息。")]),s._v("\n")])])]),a("h3",{attrs:{id:"挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载"}},[s._v("#")]),s._v(" 挂载")]),s._v(" "),a("blockquote",[a("p",[s._v("直接挂载。但是是用逻辑卷的名称挂载。硬盘上的数据还在。")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看物理卷 pvscan")]),s._v("\npvs\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看卷组 vgdisplay")]),s._v("\nvgs\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vgcreate vg名字 需要加入这个vg的pv分区")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vgextend  vg名称  pv分区")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 激活逻辑卷")]),s._v("\nvgchange "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ay")]),s._v(" /dev/VolGroup00\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vgdisplay")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建分区")]),s._v("\nlvcreate "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" 分区大小+单位  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v("  lv分区名称   vg名称\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除分区")]),s._v("\nlvremove 分区位置"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/dev/disk_lvm/name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看服务器物理分区，逻辑卷的信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看逻辑卷的具体信息")]),s._v("\nlvdisplay\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接格式化分区")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkfs")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" ext4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" /dev/sdb1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载硬盘")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" /dev/sdb1 /mnt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开机自动挂载，不备份且启动时检查顺序（根分区通常为0 1）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/sdb1 /mnt ext4 defaults 0 2"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/fstab\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dev/sdb1 /mnt ext4 defaults 0 2'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" /etc/fstab\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查fstab语法")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" findmnt "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--verify")]),s._v("\n")])])]),a("h2",{attrs:{id:"扩容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#扩容"}},[s._v("#")]),s._v(" 扩容")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看磁盘挂载信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Th")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出系统上所有的磁盘")]),s._v("\nlsblk "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v("\nlsblk "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ro,rm"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" part "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $1}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出设备的uuid")]),s._v("\nblkid\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" blkid "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" UUID "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" TYPE "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" value /dev/sdb1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询文件系统状态")]),s._v("\ndumpe2fs\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 扩容")]),s._v("\nlvextend "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" 50G /dev/mapper/ubuntu--vg-ubuntu--lv\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全部空间都给这个盘")]),s._v("\nlvextend "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" +100%FREE /dev/mapper/ubuntu--vg-ubuntu--lv\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新计算磁盘大小")]),s._v("\nresize2fs /dev/mapper/ubuntu--vg-ubuntu--lv\n")])])])])},[],!1,null,null,null);a.default=n.exports}}]);